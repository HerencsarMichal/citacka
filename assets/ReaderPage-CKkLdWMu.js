import{_ as z,c as l,a as t,d as g,w as v,r as C,e as d,t as u,F as f,i as S,l as h,o as a,n as k,g as y,m as _}from"./index-BLClEv55.js";import{u as F}from"./books-Cbi33Oxq.js";import{A as x}from"./Button-DNNQGDoC.js";import{B as P}from"./Badge-DNhoaNbe.js";const B={name:"SettingsPanel",components:{Button:x},props:{isOpen:Boolean,fontSize:Number,fontFamily:String,lineHeight:Number,textWidth:Number,backgroundColor:String,textColor:String},data(){return{fontFamilies:[{name:"Georgia",value:"Georgia, serif"},{name:"Times",value:'"Times New Roman", serif'},{name:"Merriweather",value:"Merriweather, serif"},{name:"Arial",value:"Arial, sans-serif"},{name:"Verdana",value:"Verdana, sans-serif"},{name:"Courier",value:'"Courier New", monospace'}],lineHeights:[{label:"√özke",value:1.4},{label:"Norm√°lne",value:1.6},{label:"Voƒæn√©",value:1.8},{label:"Veƒæmi voƒæn√©",value:2}],textWidths:[{label:"√özke",value:600},{label:"Norm√°lne",value:800},{label:"≈†irok√©",value:1e3},{label:"Maxim√°lne",value:1200}],backgrounds:[{value:"#FFFFFF"},{value:"#F5F1E8"},{value:"#FFF9E6"},{value:"#E8F4F8"},{value:"#2C2C2C"},{value:"#1A1A1A"}],textColors:[{value:"#1A1A1A"},{value:"#333333"},{value:"#4A4A4A"},{value:"#D4D4D4"},{value:"#E0E0E0"},{value:"#FFFFFF"}]}},methods:{increaseFontSize(){this.fontSize<28&&this.$emit("update:fontSize",this.fontSize+1)},decreaseFontSize(){this.fontSize>14&&this.$emit("update:fontSize",this.fontSize-1)}},emits:["close","update:fontSize","update:fontFamily","update:lineHeight","update:textWidth","update:backgroundColor","update:textColor","reset"]},A={class:"settings-content"},I={class:"settings-header"},H={class:"settings-body"},N={class:"setting-group"},T={class:"font-size-controls"},W={class:"font-size-value"},O={class:"setting-group"},E={class:"font-family-grid"},V=["onClick"],w={class:"setting-group"},R={class:"line-height-controls"},U=["onClick"],$={class:"setting-group"},j={class:"width-controls"},D=["onClick"],L={class:"setting-group"},M={class:"color-grid"},G=["onClick"],K={key:0,class:"check-mark"},J={class:"setting-group"},q={class:"color-grid"},Q=["onClick"],X={key:0,class:"check-mark"},Y={class:"setting-group"};function Z(n,e,r,m,o,p){const c=C("Button");return a(),l("div",{class:h(["settings-panel",{open:r.isOpen}])},[t("div",{class:"settings-overlay",onClick:e[0]||(e[0]=s=>n.$emit("close"))}),t("div",A,[t("div",I,[e[4]||(e[4]=t("h2",null,"‚öôÔ∏è Nastavenia ƒç√≠tania",-1)),g(c,{variant:"ghost",size:"small",onClick:e[1]||(e[1]=s=>n.$emit("close"))},{default:v(()=>[...e[3]||(e[3]=[d(" ‚úï ",-1)])]),_:1})]),t("div",H,[t("div",N,[e[7]||(e[7]=t("label",{class:"setting-label"},[t("span",{class:"label-icon"},"üî§"),d(" Veƒækos≈• p√≠sma ")],-1)),t("div",T,[g(c,{variant:"ghost",size:"small",onClick:p.decreaseFontSize,disabled:r.fontSize<=14},{default:v(()=>[...e[5]||(e[5]=[d(" A- ",-1)])]),_:1},8,["onClick","disabled"]),t("span",W,u(r.fontSize)+"px",1),g(c,{variant:"ghost",size:"small",onClick:p.increaseFontSize,disabled:r.fontSize>=28},{default:v(()=>[...e[6]||(e[6]=[d(" A+ ",-1)])]),_:1},8,["onClick","disabled"])])]),t("div",O,[e[8]||(e[8]=t("label",{class:"setting-label"},[t("span",{class:"label-icon"},"‚úçÔ∏è"),d(" Typ p√≠sma ")],-1)),t("div",E,[(a(!0),l(f,null,S(o.fontFamilies,s=>(a(),l("button",{key:s.value,class:h(["font-option",{active:r.fontFamily===s.value}]),onClick:b=>n.$emit("update:fontFamily",s.value)},[t("span",{style:k({fontFamily:s.value})},u(s.name),5)],10,V))),128))])]),t("div",w,[e[9]||(e[9]=t("label",{class:"setting-label"},[t("span",{class:"label-icon"},"üìè"),d(" Riadkovanie ")],-1)),t("div",R,[(a(!0),l(f,null,S(o.lineHeights,s=>(a(),l("button",{key:s.value,class:h(["line-height-option",{active:r.lineHeight===s.value}]),onClick:b=>n.$emit("update:lineHeight",s.value)},u(s.label),11,U))),128))])]),t("div",$,[e[10]||(e[10]=t("label",{class:"setting-label"},[t("span",{class:"label-icon"},"‚ÜîÔ∏è"),d(" ≈†√≠rka textu ")],-1)),t("div",j,[(a(!0),l(f,null,S(o.textWidths,s=>(a(),l("button",{key:s.value,class:h(["width-option",{active:r.textWidth===s.value}]),onClick:b=>n.$emit("update:textWidth",s.value)},u(s.label),11,D))),128))])]),t("div",L,[e[11]||(e[11]=t("label",{class:"setting-label"},[t("span",{class:"label-icon"},"üé®"),d(" Pozadie ")],-1)),t("div",M,[(a(!0),l(f,null,S(o.backgrounds,s=>(a(),l("button",{key:s.value,class:h(["color-option",{active:r.backgroundColor===s.value}]),style:k({backgroundColor:s.value}),onClick:b=>n.$emit("update:backgroundColor",s.value)},[r.backgroundColor===s.value?(a(),l("span",K,"‚úì")):y("",!0)],14,G))),128))])]),t("div",J,[e[12]||(e[12]=t("label",{class:"setting-label"},[t("span",{class:"label-icon"},"üñäÔ∏è"),d(" Farba textu ")],-1)),t("div",q,[(a(!0),l(f,null,S(o.textColors,s=>(a(),l("button",{key:s.value,class:h(["color-option",{active:r.textColor===s.value}]),style:k({backgroundColor:s.value}),onClick:b=>n.$emit("update:textColor",s.value)},[r.textColor===s.value?(a(),l("span",X,"‚úì")):y("",!0)],14,Q))),128))])]),t("div",Y,[g(c,{variant:"secondary",block:"",onClick:e[2]||(e[2]=s=>n.$emit("reset"))},{default:v(()=>[...e[13]||(e[13]=[d(" üîÑ Obnovi≈• predvolen√© ",-1)])]),_:1})])])])],2)}const ee=z(B,[["render",Z],["__scopeId","data-v-179574b5"]]),te={name:"ReaderPage",components:{Button:x,Badge:P,SettingsPanel:ee},data(){return{book:null,bookContent:"",isLoading:!0,error:null,currentProgress:0,scrollTimeout:null,settingsOpen:!1,readerSettings:{fontSize:18,fontFamily:"Georgia, serif",lineHeight:1.8,textWidth:800,backgroundColor:"#FFFFFF",textColor:"#1A1A1A",pageBackground:"#F5F1E8"},defaultSettings:null}},async mounted(){this.defaultSettings={...this.readerSettings},this.loadSettings(),await this.loadBook(),this.restoreScrollPosition()},beforeUnmount(){this.saveScrollPosition(),this.saveSettings()},methods:{..._(F,["loadBookContent","updateReadingProgress"]),async loadBook(){this.isLoading=!0,this.error=null;try{const n=parseInt(this.$route.params.bookId),e=await this.loadBookContent(n);if(!e){this.error="Kniha nebola n√°jden√°";return}this.book=e,e.content?this.bookContent=e.content:this.bookContent=this.generatePlaceholderContent();const m=F().purchasedBooks.find(o=>o.bookId===n);m&&(this.currentProgress=m.progress||0)}catch(n){console.error("Error loading book:",n),this.error="Chyba pri naƒç√≠tan√≠ knihy"}finally{this.isLoading=!1}},generatePlaceholderContent(){return`
Toto je zaƒçiatok knihy "${this.book.title}" od autora ${this.book.author}.

Keƒè≈æe sobsah knihy narazil na urƒçit√∫ chybu a nie je k dispoz√≠cii, tento text sl√∫≈æi ako uk√°≈æka ƒç√≠taƒçky.

Keby to funguje, tak tu m√°me text z knihy :(

Pr√≠jemn√© ƒç√≠tanie!

`.repeat(50)},handleScroll(){clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.updateProgress()},200)},updateProgress(){const n=this.$refs.readerContent;if(!n)return;const e=n.scrollTop,r=n.scrollHeight-n.clientHeight,m=Math.round(e/r*100);this.currentProgress=Math.min(m,100);const o=parseInt(this.$route.params.bookId);this.updateReadingProgress(o,this.currentProgress)},saveScrollPosition(){const n=this.$refs.readerContent;if(n){const e=this.$route.params.bookId;localStorage.setItem(`scroll_${e}`,n.scrollTop.toString())}},restoreScrollPosition(){this.$nextTick(()=>{const n=this.$refs.readerContent;if(n){const e=this.$route.params.bookId,r=localStorage.getItem(`scroll_${e}`);r&&(n.scrollTop=parseInt(r))}})},saveSettings(){localStorage.setItem("readerSettings",JSON.stringify(this.readerSettings))},loadSettings(){const n=localStorage.getItem("readerSettings");if(n)try{this.readerSettings={...this.readerSettings,...JSON.parse(n)}}catch(e){console.error("Error loading settings:",e)}},resetSettings(){this.readerSettings={...this.defaultSettings},this.saveSettings()}}},oe={class:"reader-page"},se={key:0,class:"reader-loading"},ne={key:1,class:"reader-error"},ie={key:2,class:"reader-container"},re={class:"reader-header"},le={class:"book-title-header"},ae={class:"book-author"},de={class:"reader-controls"},ue={class:"book-title-main"},ge={class:"book-author-main"},ce={class:"reader-footer"},ve={class:"progress-bar-container"},ke={class:"progress-bar"},me={class:"progress-text"};function pe(n,e,r,m,o,p){const c=C("Button"),s=C("Badge"),b=C("SettingsPanel");return a(),l("div",oe,[o.isLoading?(a(),l("div",se,[...e[13]||(e[13]=[t("div",{class:"spinner"},"üìñ",-1),t("p",null,"Naƒç√≠tavam knihu...",-1)])])):o.error?(a(),l("div",ne,[e[15]||(e[15]=t("div",{class:"error-icon"},"‚ùå",-1)),t("h2",null,u(o.error),1),g(c,{variant:"primary",onClick:e[0]||(e[0]=i=>n.$router.push("/library"))},{default:v(()=>[...e[14]||(e[14]=[d(" ‚Üê Sp√§≈• do kni≈ænice ",-1)])]),_:1})])):(a(),l("div",ie,[t("div",re,[g(c,{variant:"ghost",onClick:e[1]||(e[1]=i=>n.$router.push("/library"))},{default:v(()=>[...e[16]||(e[16]=[d(" ‚Üê Sp√§≈• ",-1)])]),_:1}),t("div",le,[t("h1",null,u(o.book.title),1),t("p",ae,u(o.book.author),1)]),t("div",de,[g(s,{variant:"info",size:"small"},{default:v(()=>[d(u(o.currentProgress)+"%",1)]),_:1}),g(c,{variant:"ghost",size:"small",onClick:e[2]||(e[2]=i=>o.settingsOpen=!0)},{default:v(()=>[...e[17]||(e[17]=[d(" ‚öôÔ∏è ",-1)])]),_:1})])]),t("div",{class:"reader-content",ref:"readerContent",onScroll:e[3]||(e[3]=(...i)=>p.handleScroll&&p.handleScroll(...i)),style:k({backgroundColor:o.readerSettings.pageBackground})},[t("div",{class:"reader-text",style:k({maxWidth:o.readerSettings.textWidth+"px",backgroundColor:o.readerSettings.backgroundColor})},[t("h1",ue,u(o.book.title),1),t("p",ge,u(o.book.author),1),e[18]||(e[18]=t("hr",{class:"divider"},null,-1)),t("div",{class:"book-text",style:k({fontSize:o.readerSettings.fontSize+"px",fontFamily:o.readerSettings.fontFamily,lineHeight:o.readerSettings.lineHeight,color:o.readerSettings.textColor})},u(o.bookContent),5)],4)],36),t("div",ce,[t("div",ve,[t("div",ke,[t("div",{class:"progress-fill",style:k({width:o.currentProgress+"%"})},null,4)]),t("span",me,u(o.currentProgress)+"% preƒç√≠tan√©",1)]),g(c,{variant:"primary",size:"small",onClick:e[4]||(e[4]=i=>o.settingsOpen=!0)},{default:v(()=>[...e[19]||(e[19]=[d(" ‚öôÔ∏è Nastavenia ",-1)])]),_:1})]),t("button",{class:"floating-settings-btn",onClick:e[5]||(e[5]=i=>o.settingsOpen=!0)}," ‚öôÔ∏è "),g(b,{isOpen:o.settingsOpen,fontSize:o.readerSettings.fontSize,"onUpdate:fontSize":e[6]||(e[6]=i=>o.readerSettings.fontSize=i),fontFamily:o.readerSettings.fontFamily,"onUpdate:fontFamily":e[7]||(e[7]=i=>o.readerSettings.fontFamily=i),lineHeight:o.readerSettings.lineHeight,"onUpdate:lineHeight":e[8]||(e[8]=i=>o.readerSettings.lineHeight=i),textWidth:o.readerSettings.textWidth,"onUpdate:textWidth":e[9]||(e[9]=i=>o.readerSettings.textWidth=i),backgroundColor:o.readerSettings.backgroundColor,"onUpdate:backgroundColor":e[10]||(e[10]=i=>o.readerSettings.backgroundColor=i),textColor:o.readerSettings.textColor,"onUpdate:textColor":e[11]||(e[11]=i=>o.readerSettings.textColor=i),onClose:e[12]||(e[12]=i=>o.settingsOpen=!1),onReset:p.resetSettings},null,8,["isOpen","fontSize","fontFamily","lineHeight","textWidth","backgroundColor","textColor","onReset"])]))])}const Ce=z(te,[["render",pe],["__scopeId","data-v-abf19272"]]);export{Ce as default};
