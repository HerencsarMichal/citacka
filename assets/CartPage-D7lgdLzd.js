import{_ as b,c as m,a as t,t as i,n as q,d as k,w as l,r as y,o as n,e as u,m as I,q as j,f as z,k as p,g as Q,F,i as x}from"./index-BLClEv55.js";import{u as h}from"./books-Cbi33Oxq.js";import{A as C}from"./Button-DNNQGDoC.js";import{B as g}from"./Badge-DNhoaNbe.js";const P={name:"CartItem",components:{Button:C,Badge:g},props:{book:{type:Object,required:!0},quantity:{type:Number,required:!0}},computed:{totalPrice(){return(this.book.price*this.quantity).toFixed(2)}},methods:{increaseQuantity(){this.quantity<this.book.stock&&this.$emit("update-quantity",this.quantity+1)},decreaseQuantity(){this.quantity>1&&this.$emit("update-quantity",this.quantity-1)}},emits:["update-quantity","remove"]},w={class:"cart-item"},N={class:"emoji"},V={class:"item-details"},S={class:"item-title"},$={class:"item-author"},O={class:"item-quantity"},A=["disabled"],D={class:"qty-value"},T=["disabled"],R={class:"item-price"},U={class:"unit-price"},E={class:"total-price"},G={class:"item-actions"};function H(a,e,o,f,B,s){const v=y("Badge"),c=y("Button");return n(),m("div",w,[t("div",{class:"item-image",style:q({backgroundColor:o.book.color})},[t("span",N,i(o.book.emoji),1)],4),t("div",V,[t("h3",S,i(o.book.title),1),t("p",$,i(o.book.author),1),k(v,{variant:"info",size:"small"},{default:l(()=>[u(i(o.book.genre),1)]),_:1})]),t("div",O,[t("button",{class:"qty-btn",onClick:e[0]||(e[0]=(...r)=>s.decreaseQuantity&&s.decreaseQuantity(...r)),disabled:o.quantity<=1}," ‚àí ",8,A),t("span",D,i(o.quantity),1),t("button",{class:"qty-btn",onClick:e[1]||(e[1]=(...r)=>s.increaseQuantity&&s.increaseQuantity(...r)),disabled:o.quantity>=o.book.stock}," + ",8,T)]),t("div",R,[t("div",U,i(o.book.price)+"‚Ç¨ / ks",1),t("div",E,i(s.totalPrice)+"‚Ç¨",1)]),t("div",G,[k(c,{variant:"danger",size:"small",onClick:e[2]||(e[2]=r=>a.$emit("remove"))},{default:l(()=>[...e[3]||(e[3]=[u(" üóëÔ∏è Odstr√°ni≈• ",-1)])]),_:1})])])}const K=b(P,[["render",H],["__scopeId","data-v-bb2b275d"]]),L={name:"CartPage",components:{Button:C,Badge:g,CartItem:K},computed:{...z(h,["cart","allBooks"]),...j(h,["cartItemsCount","cartTotal"]),cartItems(){return this.cart},subtotal(){return this.cartTotal},shipping(){return this.subtotal>=50?0:3.99},vat(){return(this.subtotal+this.shipping)*.2},total(){return this.subtotal+this.shipping+this.vat}},methods:{...I(h,["removeFromCart","clearCart","updateCartQuantity","checkout"]),getBookById(a){return this.allBooks.find(e=>e.id===a)||{}},updateQuantity(a,e){const o=this.updateCartQuantity(a,e);!o.success&&o.message&&alert("‚ùå "+o.message)},removeItem(a){confirm("Naozaj chcete odstr√°ni≈• t√∫to knihu z ko≈°√≠ka?")&&this.removeFromCart(a)},handleClearCart(){confirm("Naozaj chcete vypr√°zdni≈• cel√Ω ko≈°√≠k?")&&this.clearCart()},async handleCheckout(){if(confirm(`Potvrdi≈• objedn√°vku za ${this.total.toFixed(2)} ‚Ç¨?`)){const a=await this.checkout();a.success?(alert(`‚úÖ Objedn√°vka √∫spe≈°ne dokonƒçen√°!

Knihy boli pridan√© do va≈°ej kni≈ænice.`),this.$router.push("/library")):alert("‚ùå "+a.message)}}}},M={class:"page"},J={class:"container"},W={class:"page-container card shadow rounded-xl"},X={class:"page-header"},Y={class:"page-content"},Z={key:0,class:"empty-cart text-center py-5"},tt={key:1},et={class:"cart-items-list"},st={class:"cart-summary"},at={class:"summary-row"},ot={class:"summary-value"},it={class:"summary-row"},nt={class:"summary-value"},rt={class:"summary-row"},dt={class:"summary-value"},lt={class:"summary-row total"},ut={class:"total-value"},ct={class:"cart-actions"};function mt(a,e,o,f,B,s){const v=y("Badge"),c=y("Button"),r=y("CartItem");return n(),m("div",M,[t("div",J,[t("div",W,[t("div",X,[e[1]||(e[1]=t("div",null,[t("h1",null,"üõí N√°kupn√Ω ko≈°√≠k"),t("p",{class:"subtitle"},"Va≈°e vybrat√© knihy")],-1)),a.cartItemsCount>0?(n(),p(v,{key:0,variant:"primary",size:"large"},{default:l(()=>[u(i(a.cartItemsCount)+" "+i(a.cartItemsCount===1?"polo≈æka":"polo≈æiek"),1)]),_:1})):Q("",!0)]),t("div",Y,[s.cartItems.length===0?(n(),m("div",Z,[e[3]||(e[3]=t("div",{class:"empty-icon mb-3"},"üõí",-1)),e[4]||(e[4]=t("h2",{class:"mb-3"},"V√°≈° ko≈°√≠k je pr√°zdny",-1)),e[5]||(e[5]=t("p",{class:"mb-4 text-secondary"},"Pridajte si knihy z katal√≥gu",-1)),k(c,{variant:"primary",onClick:e[0]||(e[0]=d=>a.$router.push("/catalog"))},{default:l(()=>[...e[2]||(e[2]=[u(" üìö Prejs≈• do katal√≥gu ",-1)])]),_:1})])):(n(),m("div",tt,[t("div",et,[(n(!0),m(F,null,x(s.cartItems,d=>(n(),p(r,{key:d.bookId,book:s.getBookById(d.bookId),quantity:d.quantity,onUpdateQuantity:_=>s.updateQuantity(d.bookId,_),onRemove:_=>s.removeItem(d.bookId)},null,8,["book","quantity","onUpdateQuantity","onRemove"]))),128))]),t("div",st,[e[9]||(e[9]=t("h3",{class:"summary-title"},"S√∫hrn objedn√°vky",-1)),t("div",at,[t("span",null,"Medzis√∫ƒçet ("+i(a.cartItemsCount)+" ks):",1),t("span",ot,i(s.subtotal.toFixed(2))+" ‚Ç¨",1)]),t("div",it,[e[6]||(e[6]=t("span",null,"Po≈°tovn√©:",-1)),t("span",nt,i(s.shipping.toFixed(2))+" ‚Ç¨",1)]),t("div",rt,[e[7]||(e[7]=t("span",null,"DPH (20%):",-1)),t("span",dt,i(s.vat.toFixed(2))+" ‚Ç¨",1)]),t("div",lt,[e[8]||(e[8]=t("span",{class:"total-label"},"Celkom:",-1)),t("span",ut,i(s.total.toFixed(2))+" ‚Ç¨",1)]),e[10]||(e[10]=t("div",{class:"summary-note"}," üì¶ Objedn√°vka zah≈ï≈àa digit√°lnu aj fyzick√∫ k√≥piu ka≈ædej knihy ",-1))]),t("div",ct,[k(c,{variant:"ghost",onClick:s.handleClearCart},{default:l(()=>[...e[11]||(e[11]=[u(" üóëÔ∏è Vypr√°zdni≈• ko≈°√≠k ",-1)])]),_:1},8,["onClick"]),k(c,{variant:"primary",size:"large",onClick:s.handleCheckout},{default:l(()=>[u(" ‚úÖ Dokonƒçi≈• objedn√°vku ("+i(s.total.toFixed(2))+" ‚Ç¨) ",1)]),_:1},8,["onClick"])])]))])])])])}const _t=b(L,[["render",mt],["__scopeId","data-v-2fbae2b2"]]);export{_t as default};
