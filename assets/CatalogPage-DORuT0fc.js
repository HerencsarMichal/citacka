import{_ as b,m as w,f as z,c as l,a as t,g as y,d as g,w as d,r as C,h as f,v as B,F as _,i as P,b as S,j as V,t as i,o as r,e as c,k,n as j}from"./index-B9CXmcMK.js";import{u as v}from"./books-CYVPIMdn.js";import{A as N}from"./Button-DgJRgxD2.js";import{B as G}from"./Badge-DrPKx4V7.js";const I={name:"CatalogPage",components:{Button:N,Badge:G},data(){return{selectedGenre:"",sortBy:"title",searchQuery:"",currentPage:1,itemsPerPage:12}},computed:{...z(v,["allBooks","isLoading","cartItemsCount","isInCart","isPurchased"]),genres(){const a=new Set(this.allBooks.map(e=>e.genre));return Array.from(a).sort()},filteredBooks(){let a=[...this.allBooks];if(this.selectedGenre&&(a=a.filter(e=>e.genre===this.selectedGenre)),this.searchQuery){const e=this.searchQuery.toLowerCase();a=a.filter(o=>o.title.toLowerCase().includes(e)||o.author.toLowerCase().includes(e))}switch(this.sortBy){case"price-asc":a.sort((e,o)=>e.price-o.price);break;case"price-desc":a.sort((e,o)=>o.price-e.price);break;case"rating":a.sort((e,o)=>o.rating-e.rating);break;case"stock":a.sort((e,o)=>o.stock-e.stock);break;default:a.sort((e,o)=>e.title.localeCompare(o.title))}return a},totalPages(){return Math.ceil(this.filteredBooks.length/this.itemsPerPage)},paginatedBooks(){const a=(this.currentPage-1)*this.itemsPerPage,e=a+this.itemsPerPage;return this.filteredBooks.slice(a,e)}},watch:{filteredBooks(){this.currentPage=1}},async mounted(){const a=v();this.allBooks.length===0&&await a.initializeBooks()},methods:{...w(v,["addToCart","removeFromCart"]),addToCart(a){const e=v().addToCart(a);e.success?alert("âœ… Kniha pridanÃ¡ do koÅ¡Ã­ka"):alert("âŒ "+e.message)}}},L={class:"page"},T={class:"container"},Q={class:"page-container card shadow rounded-xl"},A={class:"page-header"},D={class:"filters-section"},F={class:"filter-group"},H=["value"],K={class:"filter-group"},M={class:"filter-group"},U={key:0,class:"loading-state"},q={key:1,class:"books-grid"},O={class:"emoji"},E={class:"book-info"},Z={class:"book-title"},x={class:"book-author"},J={class:"book-meta"},R={class:"book-pages"},W={class:"book-rating"},X={class:"book-description"},Y={class:"book-footer"},$={class:"price-stock"},ee={class:"book-price"},te={class:"book-actions"},se={key:2,class:"empty-state"},ae={key:3,class:"pagination"},oe={class:"page-info"};function ie(a,e,o,re,n,u){const m=C("Badge"),p=C("Button");return r(),l("div",L,[t("div",T,[t("div",Q,[t("div",A,[e[7]||(e[7]=t("div",null,[t("h1",null,"ğŸ“š KatalÃ³g knÃ­h"),t("p",{class:"subtitle"},"Objavte naÅ¡u ponuku digitÃ¡lnych a fyzickÃ½ch knÃ­h")],-1)),g(p,{variant:"primary",onClick:e[0]||(e[0]=s=>a.$router.push("/cart"))},{default:d(()=>[e[6]||(e[6]=c(" ğŸ›’ KoÅ¡Ã­k ",-1)),a.cartItemsCount>0?(r(),k(m,{key:0,variant:"danger",size:"small"},{default:d(()=>[c(i(a.cartItemsCount),1)]),_:1})):y("",!0)]),_:1})]),t("div",D,[t("div",F,[e[9]||(e[9]=t("label",null,"Å½Ã¡ner:",-1)),f(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.selectedGenre=s),class:"filter-select"},[e[8]||(e[8]=t("option",{value:""},"VÅ¡etky Å¾Ã¡nre",-1)),(r(!0),l(_,null,P(u.genres,s=>(r(),l("option",{key:s,value:s},i(s),9,H))),128))],512),[[B,n.selectedGenre]])]),t("div",K,[e[11]||(e[11]=t("label",null,"ZoradiÅ¥:",-1)),f(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>n.sortBy=s),class:"filter-select"},[...e[10]||(e[10]=[S('<option value="title" data-v-42af66c8>NÃ¡zov</option><option value="price-asc" data-v-42af66c8>Cena (najlacnejÅ¡ie)</option><option value="price-desc" data-v-42af66c8>Cena (najdrahÅ¡ie)</option><option value="rating" data-v-42af66c8>Hodnotenie</option><option value="stock" data-v-42af66c8>DostupnosÅ¥</option>',5)])],512),[[B,n.sortBy]])]),t("div",M,[e[12]||(e[12]=t("label",null,"HÄ¾adaÅ¥:",-1)),f(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>n.searchQuery=s),type:"text",placeholder:"HÄ¾adaÅ¥ knihy...",class:"search-input"},null,512),[[V,n.searchQuery]])])]),a.isLoading?(r(),l("div",U,[...e[13]||(e[13]=[t("div",{class:"spinner"},"â³",-1),t("p",null,"NaÄÃ­tavam katalÃ³g...",-1)])])):u.filteredBooks.length>0?(r(),l("div",q,[(r(!0),l(_,null,P(u.paginatedBooks,s=>(r(),l("div",{key:s.id,class:"book-card-catalog"},[t("div",{class:"book-icon",style:j({backgroundColor:s.color})},[t("span",O,i(s.emoji),1)],4),t("div",E,[t("h3",Z,i(s.title),1),t("p",x,i(s.author),1),t("div",J,[g(m,{variant:"info",size:"small"},{default:d(()=>[c(i(s.genre),1)]),_:2},1024),t("span",R,"ğŸ“„ "+i(s.pages)+" strÃ¡n",1)]),t("div",W," â­ "+i(s.rating),1),t("p",X,i(s.description),1),t("div",Y,[t("div",$,[t("div",ee,i(s.price)+"â‚¬",1),g(m,{variant:s.stock>10?"success":s.stock>0?"warning":"danger",size:"small"},{default:d(()=>[c(i(s.stock>0?`Skladom: ${s.stock} ks`:"VypredanÃ©"),1)]),_:2},1032,["variant"])]),t("div",te,[a.isPurchased(s.id)?(r(),k(p,{key:0,variant:"secondary",block:"",onClick:h=>a.$router.push(`/reader/${s.id}`)},{default:d(()=>[...e[14]||(e[14]=[c(" ğŸ“– ÄŒÃ­taÅ¥ ",-1)])]),_:1},8,["onClick"])):a.isInCart(s.id)?(r(),k(p,{key:1,variant:"ghost",block:"",onClick:h=>a.removeFromCart(s.id)},{default:d(()=>[...e[15]||(e[15]=[c(" âŒ OdstrÃ¡niÅ¥ z koÅ¡Ã­ka ",-1)])]),_:1},8,["onClick"])):(r(),k(p,{key:2,variant:"primary",block:"",disabled:s.stock===0,onClick:h=>u.addToCart(s.id)},{default:d(()=>[...e[16]||(e[16]=[c(" ğŸ›’ Do koÅ¡Ã­ka ",-1)])]),_:1},8,["disabled","onClick"]))])])])]))),128))])):(r(),l("div",se,[...e[17]||(e[17]=[t("div",{class:"empty-icon"},"ğŸ”",-1),t("h2",null,"NenaÅ¡li sa Å¾iadne knihy",-1),t("p",null,"SkÃºste zmeniÅ¥ filter alebo vyhÄ¾adÃ¡vanie",-1)])])),u.totalPages>1?(r(),l("div",ae,[g(p,{variant:"ghost",disabled:n.currentPage===1,onClick:e[4]||(e[4]=s=>n.currentPage--)},{default:d(()=>[...e[18]||(e[18]=[c(" â† PredchÃ¡dzajÃºca ",-1)])]),_:1},8,["disabled"]),t("span",oe," Strana "+i(n.currentPage)+" z "+i(u.totalPages),1),g(p,{variant:"ghost",disabled:n.currentPage===u.totalPages,onClick:e[5]||(e[5]=s=>n.currentPage++)},{default:d(()=>[...e[19]||(e[19]=[c(" ÄalÅ¡ia â†’ ",-1)])]),_:1},8,["disabled"])])):y("",!0)])])])}const ue=b(I,[["render",ie],["__scopeId","data-v-42af66c8"]]);export{ue as default};
